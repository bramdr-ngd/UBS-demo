{
  "acl" : [ {
    "owner" : true,
    "subject" : "EVERYONE"
  } ],
  "id" : null,
  "description" : null,
  "name" : "scoring.product_score",
  "table" : {
    "type" : {
      "kind" : "TABLE",
      "fields" : [ {
        "name" : "id",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "long"
        }
      }, {
        "name" : "product_name",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "product_category",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "product_sub_category",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "description",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "expectednetvalue",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "double"
        }
      }, {
        "name" : "producteligibility",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "productpropensity",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      },
      {
              "name" : "productscore",
              "dataType" : {
                "kind" : "SCALAR",
                "scalarType" : "string"
              }
            },
     {
        "name" : "productpriority",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "productprioritysc1",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "productprioritysc2",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "productprioritysc3",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "nbrstepsjourney",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "int"
        }
      }, {
        "name" : "inclusiondnajp1",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "exclusiondnajp1",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "inclusiondnajp2",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "exclusiondnajp2",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "inclusiondnajp3",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "exclusiondnajp3",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "inclusiondnajp4",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "exclusiondnajp4",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "inclusiondnajp5",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "exclusiondnajp5",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "namejourneystage1",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "namejourneystage2",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "namejourneystage3",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "namejourneystage4",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "namejourneystage5",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flagjourneystage1",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flagjourneystage3",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flagjourneystage4",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flagjourneystage5",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "journeystagename",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "journeystagestep",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "journeystageprogress",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flaginjourney",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      }, {
        "name" : "flagjourneystage2",
        "dataType" : {
          "kind" : "SCALAR",
          "scalarType" : "string"
        }
      } ,
      {
              "name" : "valid_locations",
              "dataType" : {
                "kind" : "ARRAY",
                "scalarType" : "string"
              }
            }, {
              "name" : "valid_channels",
              "dataType" : {
                "kind" : "ARRAY",
                "scalarType" : "string"
              }
            }, {
              "name" : "valid_identifications",
              "dataType" : {
                "kind" : "ARRAY",
                "scalarType" : "string"
              }
            }, {
              "name" : "valid_journey_stages",
              "dataType" : {
                "kind" : "ARRAY",
                "scalarType" : "string"
              }
            },
             {
                     "name" : "valid_devices",
                     "dataType" : {
                       "kind" : "ARRAY",
                       "scalarType" : "string"
                     }
                   },
                   {
                           "name" : "valid_from_time",
                           "dataType" : {
                             "kind" : "SCALAR",
                             "scalarType" : "datetime"
                           }
                         },
                                      {
                                              "name" : "valid_to_time",
                                              "dataType" : {
                                                "kind" : "SCALAR",
                                                "scalarType" : "datetime"
                                              }
                                            },
                   {
                           "name" : "productmodelerror",
                           "dataType" : {
                             "kind" : "SCALAR",
                             "scalarType" : "string"
                           }
                         }
                                            ],
      "primaryKey" : [ "id" ]
    },
    "rows" : [ {
      "id" : "1",
      "product_name" : "new car loan",
      "product_category" : "loans",
      "product_sub_category" : "car loans",
      "description" : "A car loan for a new car",
      "expectednetvalue" : 500.0,
      "producteligibility" : "switch(dna.age>17 AND dna.age<71,1,0)",
      "productpropensity" : "dna.propensityCarLoanModel",
       "productscore": "cast(dna.productEligibility[products_id=entity.id],'double') * dna.productPropensity[products_id=entity.id]",
      "productpriority" : "dna.productPrioritySC1[products_id=entity.id]*dna.productPrioritySC2[products_id=entity.id]*dna.productPrioritySC3[products_id=entity.id]*entity.expectednetvalue",
      "productprioritysc1" : "switch(dna.timeToFirstExpByProduct[name='Car Loan']>0 AND dna.timeToFirstExpByProduct[name='Car Loan']<181 AND dna.flagExistingCustomer=1, 1.5,1.0)",
      "productprioritysc2" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>0 AND dna.recencyLastAcqByProduct[name='Car Loan']<366 AND dna.flagExistingCustomer=1, 0.7,1.0)",
      "productprioritysc3" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>30,1.5,1.0)",
      "nbrstepsjourney" : 3,
      "inclusiondnajp1" : "switch(dna.totalDebitPurchasesPer7Days>0,1,0)",
      "exclusiondnajp1" : "switch(dna.recencyLastAcqByProduct[name='car loan']<180,1,0)",
      "inclusiondnajp2" : "switch(dna.flagCheckingAccount =1,1,0)",
      "exclusiondnajp2" : "switch(dna.flagDebtCollection=1,1,0)",
      "inclusiondnajp3" : "switch(dna.riskProfileScore<0.6,1,0)",
      "exclusiondnajp3" : "switch(dna.numberLoanSimulations>0,1,0)",
      "namejourneystage1" : "Awareness",
      "namejourneystage2" : "Consideration",
      "namejourneystage3" : "Simulation",
      "namejourneystage4" : "Decision",
      "namejourneystage5" : "Post-Purchase",
      "flagjourneystage1" : "switch(dna.inclusionDnaJP1[products_id=entity.id]=0 and dna.exclusionDnaJP1[products_id=entity.id]=0,0, dna.inclusionDnaJP1[products_id=entity.id]=1 and dna.exclusionDnaJP1[products_id=entity.id]=0, 1, 0)",
      "flagjourneystage3" : "switch(dna.inclusionDnaJP3[products_id=entity.id]=0 and dna.exclusionDnaJP3[products_id=entity.id]=0,0, dna.inclusionDnaJP3[products_id=entity.id]=1 and dna.exclusionDnaJP3[products_id=entity.id]=0, 1, 0)",
      "journeystagename" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage1,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, entity.namejourneystage3)",
      "journeystagestep" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, 1, dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, 2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, 3)",
      "journeystageprogress" : "toDouble(dna.journeyStageStep[products_id=entity.id])/toDouble(entity.nbrstepsjourney)*100.00",
      "flaginjourney" : "switch(dna.productPropensity[products_id=entity.id] > 0.3,1,dna.flagJourneyStage1[products_id=entity.id] + dna.flagJourneyStage2[products_id=entity.id] + dna.flagJourneyStage3[products_id=entity.id]=1,1,0)",
      "flagjourneystage2" : "switch(dna.inclusionDnaJP2[products_id=entity.id]=0 and dna.exclusionDnaJP2[products_id=entity.id]=0,0, dna.inclusionDnaJP2[products_id=entity.id]=1 and dna.exclusionDnaJP2[products_id=entity.id]=0, 1, 0)",
      "productmodelerror" : 0.07,
      "valid_locations":[ "car loan overview page","car loan simulation page","new car loan page" ]
    }, {
      "id" : "2",
      "product_name" : "used car loan",
      "product_category" : "loans",
      "product_sub_category" : "car loans",
      "description" : "A car loan for a second-hand car",
      "expectednetvalue" : 300.0,
      "producteligibility" : "switch(dna.age>17 AND dna.age<71,1,0)",
      "productpropensity" : "dna.propensityCarLoanModel",
       "productscore": "cast(dna.productEligibility[products_id=entity.id],'double') * dna.productPropensity[products_id=entity.id]",
      "productpriority" : "dna.productPrioritySC1[products_id=2]*dna.productPrioritySC2[products_id=2]*dna.productPrioritySC3[products_id=2]*entity.expectednetvalue",
      "productprioritysc1" : "switch(dna.timeToFirstExpByProduct[name='Car Loan']>0 AND dna.timeToFirstExpByProduct[name='Car Loan']<181 AND dna.flagExistingCustomer=1, 1.5,1.0)",
      "productprioritysc2" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>0 AND dna.recencyLastAcqByProduct[name='Car Loan']<366 AND dna.flagExistingCustomer=1, 0.7,1.0)",
      "productprioritysc3" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>30,1.5,1.0)",
            "nbrstepsjourney" : 3,
            "inclusiondnajp1" : "switch(dna.totalDebitPurchasesPer7Days>0,1,0)",
            "exclusiondnajp1" : "switch(dna.recencyLastAcqByProduct[name='car loan']<180,1,0)",
            "inclusiondnajp2" : "switch(dna.flagCheckingAccount =1,1,0)",
            "exclusiondnajp2" : "switch(dna.flagDebtCollection=1,1,0)",
            "inclusiondnajp3" : "switch(dna.riskProfileScore<0.6,1,0)",
            "exclusiondnajp3" : "switch(dna.numberLoanSimulations>0,1,0)",
            "namejourneystage1" : "Awareness",
            "namejourneystage2" : "Consideration",
            "namejourneystage3" : "Simulation",
            "namejourneystage4" : "Decision",
            "namejourneystage5" : "Post-Purchase",
            "flagjourneystage1" : "switch(dna.inclusionDnaJP1[products_id=entity.id]=0 and dna.exclusionDnaJP1[products_id=entity.id]=0,0, dna.inclusionDnaJP1[products_id=entity.id]=1 and dna.exclusionDnaJP1[products_id=entity.id]=0, 1, 0)",
            "flagjourneystage3" : "switch(dna.inclusionDnaJP3[products_id=entity.id]=0 and dna.exclusionDnaJP3[products_id=entity.id]=0,0, dna.inclusionDnaJP3[products_id=entity.id]=1 and dna.exclusionDnaJP3[products_id=entity.id]=0, 1, 0)",
            "journeystagename" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage1,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, entity.namejourneystage3)",
            "journeystagestep" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, 1, dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, 2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, 3)",
            "journeystageprogress" : "toDouble(dna.journeyStageStep[products_id=entity.id])/toDouble(entity.nbrstepsjourney)*100.00",
            "flaginjourney" : "switch(dna.productPropensity[products_id=entity.id] > 0.3,1,dna.flagJourneyStage1[products_id=entity.id] + dna.flagJourneyStage2[products_id=entity.id] + dna.flagJourneyStage3[products_id=entity.id]=1,1,0)",
            "flagjourneystage2" : "switch(dna.inclusionDnaJP2[products_id=entity.id]=0 and dna.exclusionDnaJP2[products_id=entity.id]=0,0, dna.inclusionDnaJP2[products_id=entity.id]=1 and dna.exclusionDnaJP2[products_id=entity.id]=0, 1, 0)",
      "productmodelerror" : 0.09,
                       "valid_locations":[ "car loan overview page","car loan simulation page","used car loan page" ]
    }, {
      "id" : "3",
      "product_name" : "refinancing car loan",
      "product_category" : "loans",
      "product_sub_category" : "car loans",
      "description" : "A refinancing car loan",
      "expectednetvalue" : 200.0,
      "producteligibility" : "switch(dna.age>17 AND dna.age<71,1,0)",
      "productpropensity" : "dna.propensityCarLoanModel",
       "productscore": "cast(dna.productEligibility[products_id=entity.id],'double') * dna.productPropensity[products_id=entity.id]",
      "productpriority" : "dna.productPrioritySC1[products_id=3]*dna.productPrioritySC2[products_id=3]*dna.productPrioritySC3[products_id=3]*entity.expectednetvalue",
      "productprioritysc1" : "switch(dna.timeToFirstExpByProduct[name='Car Loan']>0 AND dna.timeToFirstExpByProduct[name='Car Loan']<181 AND dna.flagExistingCustomer=1, 1.5,1.0)",
      "productprioritysc2" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>0 AND dna.recencyLastAcqByProduct[name='Car Loan']<366 AND dna.flagExistingCustomer=1, 0.7,1.0)",
      "productprioritysc3" : "switch(dna.recencyLastAcqByProduct[name='Car Loan']>30,1.5,1.0)",
            "nbrstepsjourney" : 3,
            "inclusiondnajp1" : "switch(dna.totalDebitPurchasesPer7Days>0,1,0)",
            "exclusiondnajp1" : "switch(dna.recencyLastAcqByProduct[name='car loan']<180,1,0)",
            "inclusiondnajp2" : "switch(dna.flagCheckingAccount =1,1,0)",
            "exclusiondnajp2" : "switch(dna.flagDebtCollection=1,1,0)",
            "inclusiondnajp3" : "switch(dna.riskProfileScore<0.6,1,0)",
            "exclusiondnajp3" : "switch(dna.numberLoanSimulations>0,1,0)",
            "namejourneystage1" : "Awareness",
            "namejourneystage2" : "Consideration",
            "namejourneystage3" : "Simulation",
            "namejourneystage4" : "Decision",
            "namejourneystage5" : "Post-Purchase",
            "flagjourneystage1" : "switch(dna.inclusionDnaJP1[products_id=entity.id]=0 and dna.exclusionDnaJP1[products_id=entity.id]=0,0, dna.inclusionDnaJP1[products_id=entity.id]=1 and dna.exclusionDnaJP1[products_id=entity.id]=0, 1, 0)",
            "flagjourneystage3" : "switch(dna.inclusionDnaJP3[products_id=entity.id]=0 and dna.exclusionDnaJP3[products_id=entity.id]=0,0, dna.inclusionDnaJP3[products_id=entity.id]=1 and dna.exclusionDnaJP3[products_id=entity.id]=0, 1, 0)",
            "journeystagename" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage1,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, entity.namejourneystage2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, entity.namejourneystage3)",
            "journeystagestep" : "switch(dna.flagJourneyStage1[products_id=entity.id]=1 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=0, 1, dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=1 AND dna.flagJourneyStage3[products_id=entity.id]=0, 2,dna.flagJourneyStage1[products_id=entity.id]=0 AND dna.flagJourneyStage2[products_id=entity.id]=0 AND dna.flagJourneyStage3[products_id=entity.id]=1, 3)",
            "journeystageprogress" : "toDouble(dna.journeyStageStep[products_id=entity.id])/toDouble(entity.nbrstepsjourney)*100.00",
            "flaginjourney" : "switch(dna.productPropensity[products_id=entity.id] > 0.3,1,dna.flagJourneyStage1[products_id=entity.id] + dna.flagJourneyStage2[products_id=entity.id] + dna.flagJourneyStage3[products_id=entity.id]=1,1,0)",
            "flagjourneystage2" : "switch(dna.inclusionDnaJP2[products_id=entity.id]=0 and dna.exclusionDnaJP2[products_id=entity.id]=0,0, dna.inclusionDnaJP2[products_id=entity.id]=1 and dna.exclusionDnaJP2[products_id=entity.id]=0, 1, 0)",
   "productmodelerror" : 0.12,
                       "valid_locations":[ "car loan overview page","car loan simulation page","new car loan page","refinancing car loan page" ]
    } ]
  },
  "attributes" : { }
}